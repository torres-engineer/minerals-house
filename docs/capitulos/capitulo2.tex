\chapter{Desenvolvimento}
\label{ch:develop}

\section{Enquadramento teórico}

\subsection{Estado da arte}

A utilização de jogos digitais no ensino das geociências tem crescido, procurando tornar conteúdos tradicionalmente áridos em experiências interativas. De modo a posicionar o \textit{Casa dos Minerais}, analisaram-se outros recursos educativos existentes, identificando as suas valências e lacunas.

Comparativamente ao \textcite{briefcasegame}, o \textit{Casa dos Minerais} aposta numa abordagem mais exploratória. Enquanto o \textit{BriefCase} foca na associação imediata objeto-mineral, o nosso projeto privilegia a contextualização espacial (o objeto no seu ``habitat'') antes da validação.
Relativamente ao \textcite{min4kids-minerals-house}, que funciona mais como uma enciclopédia interativa, o nosso jogo introduz um ciclo de \textit{gameplay} com desafios (quizzes) para testar a retenção.
Por fim, ao contrário dos exercícios isolados do \textcite{wordwall-rochas-minerais}, oferecemos um cenário persistente e contínuo.

Em síntese, o \textit{Casa dos Minerais} distingue-se por juntar a exploração livre à validação estruturada, conforme detalhado na Tabela~\ref{tab:comparacao-jogos}.

\begin{longtable}{p{3.0cm} p{3.5cm} p{4.0cm} p{3.5cm}}
\caption{Comparação entre recursos/jogos educativos sobre minerais.} \label{tab:comparacao-jogos} \\
\hline
\textbf{Recurso} & \textbf{Tipo de interação} & \textbf{Contexto (cenário)} & \textbf{Avaliação} \\
\hline
\endfirsthead
\multicolumn{4}{c}%
{\tablename\ \thetable\ -- \textit{Continuação da página anterior}} \\
\hline
\textbf{Recurso} & \textbf{Tipo de interação} & \textbf{Contexto (cenário)} & \textbf{Avaliação} \\
\hline
\endhead
\hline \multicolumn{4}{r}{\textit{Continua na próxima página}} \\
\endfoot
\hline
\endlastfoot

\textcite{briefcasegame} 
& Associação direta objeto--mineral 
& Pouco contexto espacial; foco na correspondência 
& Feedback imediato da associação \\

\textcite{min4kids-minerals-house} 
& Consulta/informação 
& Conteúdo mais informacional 
& Sem validação estruturada \\

\textcite{wordwall-rochas-minerais} 
& Mini-jogos simples 
& Contexto reduzido; tarefas isoladas 
& Feedback rápido por exercício \\

\textit{Casa dos Minerais} 
& Exploração \textit{point-and-click} + Quiz 
& Cenários familiares (casa/escola) 
& Quiz curto para reforço e desbloqueio de nível \\
\end{longtable}

\subsection{Os minerais}
\label{sec:minerals}

Eles andam por aí espalhados, mas tu nem pensas neles: os minerais.
Matéria-prima e recurso importante para diversos setores como a
indústria química, da construção civil, da agricultura e da
energia. Mas é que estão presentes em todo o lado mesmo:

\begin{itemize}
  \item Se estás a ler isto através de um aparelho eletrónico,
    esquece, desde o cobre e ouro dos cabos elétricos até ao
    silício dos microchips;
  \item Mas mesmo lendo numa folha de papel, é capaz dessa folha
    ter vestígios de cádmio, cobalto e titânio.
\end{itemize}

As frutas e vegetais que consomes, além das vitaminas, também têm os
minerais presentes no solo. Minerais são indispensáveis para a
nossa vida e para a sociedade.

O objetivo principal deste jogo é ensinar onde é que estes
minerais, que existem naturalmente no nosso planeta, estão
presentes nas coisas que usamos todos os dias. Além isso,
ensinamos qual a utilidade de certo mineral numa ocasião específica.
Mas basta isso?

Uma das razões para a qual estes minerais ficam escondidos dos
consumidores é porque, tu vais à loja e compras o telemóvel, mas o
processo de produção desse telemóvel, da extração dos minerais da
terra, da montagem do equipamento, até ao produto final, é
totalmente ofuscado. Existe uma alienação entre as nossas vidas e a
geologia — os minerais — e todo o trabalho humano que leva à
realização dos teus bens. Simplesmente o telemóvel não apareceu na
estante da loja por pozinhos de perlimpimpim. O telemóvel é visto
como uma coisa e não como fruto de mineração e do trabalho. Tudo
isto já havia sido dito na \ref{ch:intro}.

Usamos o jogo para conectar também o mineral, ao país de origem
(geografia), e ao trabalho e/ou processo necessário para esse
material estar disponível.

\subsection{Gamificação na pedagogia}

A ``Casa dos Minerais'' utiliza elementos de gamificação para
estruturar a aprendizagem e aumentar a motivação. A principal mecânica implementada é a inclusão de um \textbf{questionário no final de cada nível} (ver detalhes de implementação na Secção~\ref{sec:questions}).

Este questionário atua como um ``guardião'' ou \textit{boss fight} educativa: o jogador explora livremente para adquirir conhecimento e, no final, deve demonstrar o que aprendeu para desbloquear o próximo estágio. Esta abordagem cria um ciclo de recompensa intrínseco, onde o conhecimento é a chave para a progressão.

No entanto, a abordagem pedagógica foca-se em usar a
brincadeira como uma forma de descoberta. O objetivo
principal não é criar um sistema de avaliação punitivo, mas sim
celebrar a aprendizagem. Elementos mais competitivos, como pontuações ou temporizadores, foram considerados opcionais para futuras iterações (\ref{sec:future}), para não desvirtuar o ambiente exploratório inicial.

\subsection{Para quem é o jogo?}
\label{sec:forwho}

O público-alvo principal são crianças e jovens, servindo como ferramenta de apoio às disciplinas de Estudo do Meio e Ciências Naturais. No entanto, o design visual e a mecânica de exploração foram pensados para serem apelativos a qualquer faixa etária.

Idealmente, o acesso deve ser universal. Para promover a inclusão de utilizadores com dificuldades de leitura, como a dislexia, optou-se pela utilização de \textbf{tipografia sem serifa (sans-serif)} com espaçamento generoso e bom contraste, seguindo recomendações de acessibilidade web. Embora o protótipo atual ainda não suporte navegação total por teclado ou leitores de ecrã (como referido na Secção~\ref{sec:limitacoes}), estas escolhas visuais de base formam um alicerce sólido para uma futura acessibilidade plena.

\subsection{Aprendizagem por descoberta e contextualização}

A aprendizagem por descoberta baseia-se na ideia de que o aluno compreende 
melhor quando participa ativamente no processo. No \textit{Casa dos Minerais}, esta metodologia é aplicada através da ancoragem de conceitos abstratos em exemplos concretos.

\subsubsection{Ancoragem na Cadeia Produtiva}
Conceitos como ``Recurso Mineral'' ou ``Extração'' podem parecer distantes. O jogo encurta essa distância ao ligar o objeto familiar (ex: a torradeira na cozinha) à sua origem geológica.

Esta estrutura permite, teoricamente, criar níveis para cada etapa da cadeia de produção:
\begin{enumerate}
    \item \textbf{Nível Casa:} Onde usamos o produto final.
    \item \textbf{Nível Fábrica:} Onde vemos a montagem dos componentes.
    \item \textbf{Nível Mina:} Onde ocorre a extração do minério bruto.
\end{enumerate}

Deste modo, o jogador pode seguir o ``caminho inverso'' da produção dos seus bens, compreendendo que o telemóvel não nasce na loja, mas começa como rocha na terra. O sistema de níveis do jogo foi desenhado para suportar essa expansão temática, permitindo adicionar novos cenários que representem estas diferentes etapas.

\subsection{Ciclo pedagógico e questionários como reforço}

O ciclo do jogo combina aprendizagem por descoberta 
com reforço através de avaliação formativa. 
Numa primeira fase, o utilizador explora o cenário e compreende os conceitos no respetivo contexto.
Numa segunda fase, o utilizador inicia um questionário curto 
para recuperar ativamente o que observou.

\subsection{Qualidade do conteúdo e fontes}

A qualidade do conteúdo é fundamental para garantir que o jogo seja acessível,
envolvente e educativo. Para conseguie isso, é importante seguir boas práticas:

\begin{itemize}
  \item \textbf{Fontes fiáveis:} As associações foram baseadas em fontes reconhecidas como a USGS \textcite{usgs_education_mrp,usgs_minerals101} e a Minerals Education Coalition \textcite{mec_mineralsinyourlife}.
  \item \textbf{Coerência e Estrutura:} Utilização consistente de terminologia e estrutura uniforme nas descrições (Mineral, Uso, Origem).
  \item \textbf{Linguagem adequada:} Textos claros e diretos.
\end{itemize}

\section{Metodologia}

Para a implementação, o projeto baseia-se em tecnologias de multiplataforma, tirando partido da linguagem de programação Odin. Para a parte gráfica escolhemos a Raylib, integrada com Odin. Esta combinação permite criar gráficos 2D interativos com desempenho nativo e exportação para WebAssembly (WASM). A visualização final no navegador é assegurada pela integração deste módulo WASM com tecnologias web padrão (HTML5, CSS3 e JavaScript).

\subsection{Identificação dos minerais usados no quotidiano}

Minerais são todas as substâncias naturais formadas por processos
geológicos que normalmente consegues encontrar na crosta da terra.
A telha das casas pode ser feita com argila, o vidro com areia (quartzo).
Na cozinha, tens pratos que podem conter feldspato, e panelas de ferro e crómio.
O mais impressionante são os bens tecnológicos como telemóveis, que contêm uma vasta gama de metais raros e preciosos como ouro, lítio e cobalto.

\subsection{Critérios de seleção de objetos}

A seleção de objetos para os níveis ``casa'' e ``escola'' foi guiada por critérios pedagógicos e práticos: objetos comuns, facilmente reconhecíveis e com associações minerais claras e educativas.

\subsection{Diferenças de abordagem (exploração vs associação direta)}

Uma diferença central entre jogos educativos sobre minerais está na forma como o conhecimento é apresentado. Numa abordagem de \textbf{exploração}, o utilizador aprende ao interagir com um ambiente. Numa abordagem de \textbf{associação direta}, foca-se na memorização rápida.

O \textit{Casa dos Minerais} combina ambas: exploração inicial para contextualização, seguida de quiz para validação e treino.

\subsection{Limitações observadas e decisões adotadas no projeto}

Durante a análise de recursos e ao longo do desenvolvimento, 
foram identificadas limitações comuns em abordagens educativas sobre minerais. 
Uma delas é a tendência para conteúdos demasiado expositivos, onde o utilizador 
lê informação mas tem pouca oportunidade de a aplicar. Outra limitação é a 
associação direta sem contexto, que pode treinar a memorização de pares 
objeto--mineral, mas nem sempre ajuda a compreender a relevância desses minerais 
no quotidiano.

Para responder a estas limitações, o \textit{Casa dos Minerais} adotou decisões 
de design que equilibram simplicidade com contexto. Em vez de depender apenas 
de exercícios isolados, o jogo organiza a aprendizagem em dois momentos: 
(1) exploração num cenário familiar, onde a informação surge ligada a objetos 
do dia a dia; e (2) um questionário curto de escolha múltipla para reforço e 
validação, mantendo o ritmo e evitando fadiga.

Do ponto de vista visual, também existiram limitações na produção de assets. 
Numa fase inicial, foi testada a geração de elementos gráficos com o Gemini, 
mas os resultados não cumpriam requisitos técnicos essenciais para um mapa 
baseado em tiles, nomeadamente a disponibilização de um \textit{tileset} com 
grelha 32$\times$32\,px. Apesar de visualmente apelativas, as imagens geradas 
surgiam tipicamente em dimensões muito grandes e sem organização reutilizável, 
o que dificultava recorte, alinhamento e integração consistente no cenário. 
Por esse motivo, optou-se por adquirir um conjunto de assets estruturados, 
garantindo compatibilidade com o formato do mapa, consistência visual e uma 
experiência mais polida.

% todo meter melhores imagens com tamanhos parecidos para nao ficar aquele bloco 
\begin{figure}[H]
  \centering
  \begin{subfigure}[t]{0.58\textwidth}
    \centering
    \includegraphics[width=\textwidth]{figuras/gemini_assets.jpeg}
    \caption{Asset gerado automaticamente (Gemini): imagem visualmente apelativa, 
    mas sem estrutura de \textit{tileset} e sem grelha 32$\times$32\,px, 
    dificultando recorte, alinhamento e reutilização no mapa.}
    \label{fig:gemini-gerado}
  \end{subfigure}
  \hfill
  \begin{subfigure}[t]{0.38\textwidth}
    \centering
    \includegraphics[width=\textwidth]{figuras/paid_assets.png}
    \caption{Tileset estruturado: elementos organizados e dimensionados, 
    facilitando integração, consistência visual e reutilização no cenário.}
    \label{fig:tileset-estruturado}
  \end{subfigure}

  \caption{Comparação entre geração automática e assets estruturados para jogos 2D.
  Apesar da qualidade estética, a ausência de formato e escala (ex.: 32$\times$32\,px) 
  na geração automática limitou a utilização prática no projeto.}
  \label{fig:comparacao-gemini-tileset}
\end{figure}

A Figura~\ref{fig:comparacao-gemini-tileset} ilustra que a principal limitação 
não foi estética, mas sim técnica: o projeto exigia assets reutilizáveis em 
tilesets com dimensões uniformes (32$\times$32\,px) para montagem eficiente do mapa.

Em contrapartida, a utilização de IA (Gemini) revelou-se bastante útil para a criação de elementos individuais, nomeadamente as representações em \textit{pixel art} dos próprios minerais. Ao contrário dos \textit{tilesets} de mapa que exigem encaixe perfeito, as imagens isoladas foram geradas com qualidade satisfatória, necessitando apenas de pequenas correções pontuais (como limpeza de fundo ou ajustes de detalhes) realizadas em software de edição de imagem como o Photopea ou Photoshop.

\begin{figure}[H]
  \centering
  \begin{subfigure}[t]{0.3\textwidth}
    \centering
    \frame{\includegraphics[width=0.6\textwidth]{figuras/mineral_ouro.png}}
    \caption{Ouro}
  \end{subfigure}
  \hfill
  \begin{subfigure}[t]{0.3\textwidth}
    \centering
    \frame{\includegraphics[width=0.6\textwidth]{figuras/mineral_litio.png}}
    \caption{Lítio}
  \end{subfigure}
  \hfill
  \begin{subfigure}[t]{0.3\textwidth}
    \centering
   \frame{ \includegraphics[width=0.6\textwidth]{figuras/mineral_cobre.png}}
    \caption{Cobre}
  \end{subfigure}
  \caption{Exemplos de \textit{pixel art} de minerais gerados por IA (Gemini) e refinados manualmente.}
  \label{fig:minerais-ia}
\end{figure}

Para obter estes resultados, foi necessário especificar características detalhadas no \textit{prompt} (instrução dada à IA), como o estilo visual, a perspetiva isométrica e a paleta de cores. Um exemplo do \textit{prompt} utilizado para gerar o ícone de ``Terras Raras'' foi:

\begin{quote}
``Terras Raras Pixel art icon of rare earth minerals, 32x32 pixels, multicolored iridescent crystalline rock cluster with rainbow shimmer effect (mix of green, blue, purple, pink hues), dark outlines, simple geometric facets showing 3D depth, clean retro RPG game item style matching these references, transparent background, isometric 3/4 view, magical glowing appearance''
\end{quote}

Outra decisão importante foi manter o fluxo de interação simples e repetível. 
O utilizador pode regressar ao mapa após o questionário para rever objetos já 
descobertos ou encontrar novos, permitindo aprendizagem progressiva sem impor 
uma sequência rígida. Por fim, ao estruturar os dados de conteúdo (objetos, 
minerais, origem e utilização) de forma consistente, o projeto facilita a 
manutenção e a expansão para novos cenários, como a introdução de um nível 
centrado numa escola.

\subsection{Conceito, regras e âmbito do jogo}

\subsubsection{Conceito}

O conceito central do ``Casa dos Minerais'' foca-se na exploração 
interativa e autoguiada de um ambiente virtual, começando numa casa, 
e podendo ser expandido para outros cenários, como uma escola. 
Inspirado num formato \textit{point-and-click}, semelhante ao ``Club 
Penguin'', o jogador tem liberdade para navegar pelo mapa e interagir 
com objetos do quotidiano.

Ao clicar em objetos comuns (por exemplo, um frigorífico, uma televisão 
ou uma torradeira), o jogador acede a informação sobre os minerais 
associados ao seu fabrico. O objetivo é tornar visível a relação entre 
recursos naturais e produtos do dia a dia, através de exemplos concretos 
e familiares.

\subsubsection{Loop de gameplay}

O \textit{Casa dos Minerais} segue um ciclo simples e repetível, 
pensado para alternar descoberta e reforço do conteúdo. 
O jogador inicia num cenário (por exemplo, a casa) e explora o mapa, 
interagindo com objetos do quotidiano para desbloquear informação 
sobre os minerais/minérios associados.

Quando decide consolidar o que aprendeu, o jogador sai do cenário 
e inicia o questionário ao clicar numa área específica (marcada pela cor azul). 
O quiz é composto por 6 perguntas de escolha múltipla, com 4 opções 
por pergunta e apenas 1 resposta correta.

\begin{figure}[H]
  \centering
  \includegraphics[width=0.55\textwidth]{figuras/quiz_area.png}
  \caption{Zona de transição onde o questionário é iniciado. 
  Ao sair do mapa e clicar no ``chão azul'', começa o quiz.}
  \label{fig:chao-azul-quiz}
\end{figure}

Para avançar para o cenário seguinte, o jogador deve obter pelo menos 
50\% de respostas corretas no questionário. Caso não atinja esse valor, 
pode regressar ao mapa e tentar novamente após rever os conteúdos.

Após concluir o quiz, o jogador regressa ao mapa, podendo continuar a 
exploração no mesmo cenário ou prosseguir para o próximo, caso cumpra 
o critério de aprovação. Este ciclo promove aprendizagem progressiva, 
mantendo sessões curtas e um fluxo consistente entre cenários.

\subsubsection{Regras e progressão}

As regras do jogo privilegiam clareza e acessibilidade. A exploração 
não impõe uma sequência fixa de objetos nem penaliza o jogador por 
escolhas de percurso, permitindo diferentes estratégias de descoberta.

A progressão entre cenários é condicionada pelo desempenho no momento 
de consolidação (questionário). Quando o jogador não atinge o critério 
mínimo, a experiência incentiva a revisão do conteúdo através do regresso 
ao mapa, promovendo repetição e melhoria incremental.

\subsubsection{Âmbito do jogo}

O âmbito do \textit{Casa dos Minerais} centra-se na descoberta de informação 
sobre minerais/minérios em objetos do quotidiano e no reforço desse conteúdo 
através de um mecanismo simples de questionário. O foco do projeto é oferecer 
uma experiência curta, clara e educativa, adequada para uso autónomo ou em 
contexto de sala de aula.

Não fazem parte do âmbito atual funcionalidades avançadas como inventário, 
sistemas complexos de personalização, narrativa extensa, economia de jogo, 
ou modos competitivos. A prioridade é a qualidade do conteúdo, a coerência 
visual e a estabilidade da experiência em diferentes dispositivos.


\subsection{Como integrar outros públicos?}
\label{sec:other}

\subsubsection{Acessibilidade}

Para que o jogo seja útil a diferentes públicos, a acessibilidade deve ser 
considerada como parte do design e não apenas como um extra. Em contexto web, 
existem recomendações consolidadas pelo W3C através da \textit{Web Accessibility 
Initiative (WAI)}, que servem como referência para tornar interfaces mais 
inclusivas.

Como o jogo é renderizado num \textit{canvas}, é importante garantir que a 
informação relevante (por exemplo, textos descritivos e botões/ações) não 
depende exclusivamente de pixels no ecrã. Sempre que possível, essa informação 
deve existir também em elementos HTML semânticos, permitindo leitura por 
tecnologias de apoio, como leitores de ecrã.

Do ponto de vista de interface, boas práticas incluem: contraste adequado entre 
texto e fundo, tamanhos de letra legíveis, linguagem clara e consistente, e 
feedback visual percetível quando ocorre uma interação. Atualmente, a interação 
do jogo é feita apenas com o rato, pelo que a expansão para suporte de teclado e 
toque (\textit{touch}) constitui uma melhoria relevante para aumentar a 
acessibilidade em diferentes dispositivos.

\subsubsection{Internacionalização}

A internacionalização é importante para que o jogo possa ser utilizado por 
públicos com diferentes línguas e contextos culturais, sem alterar a lógica do 
programa. A estratégia adotada passa por separar texto e conteúdo localizável 
do código, mantendo strings de interface e textos informativos (nomes de 
objetos, minerais e descrições) em ficheiros externos, selecionados consoante 
o idioma.

Esta abordagem facilita suportar, no mínimo, português e inglês, e permite 
adicionar novos idiomas no futuro com impacto reduzido na implementação. 
Embora os browsers disponibilizem tradução automática, a localização nativa 
com recursos próprios oferece maior controlo terminológico e maior consistência 
do conteúdo educativo.

\subsubsection{Informação semântica (HTML vs canvas)}

Quando o jogo é executado no navegador, grande parte do conteúdo visual é 
renderizado num elemento HTML \texttt{canvas}. No entanto, o \texttt{canvas} 
representa a informação como pixels, o que significa que tecnologias de apoio 
(como leitores de ecrã) não conseguem interpretar diretamente o texto ou a 
estrutura apresentada no ecrã.

Por este motivo, sempre que existe informação relevante para a aprendizagem 
(por exemplo, descrições de minerais, botões de interface ou mensagens de 
feedback), é preferível disponibilizá-la também através de HTML semântico, 
com elementos apropriados. Esta abordagem 
melhora a acessibilidade, facilita indexação e permite maior compatibilidade 
com ferramentas de tradução e de apoio ao utilizador.

No contexto deste projeto, esta distinção é particularmente importante porque 
o conteúdo educativo não deve depender apenas da representação gráfica. Ao 
separar a camada visual (canvas) da camada informativa (HTML semântico), 
torna-se possível manter a experiência de jogo e, ao mesmo tempo, aumentar a 
inclusão e a reutilização do conteúdo.

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[
    node distance=1.2cm,
    every node/.style={align=center},
    box/.style={draw, rounded corners, minimum width=4.6cm, minimum height=1.1cm}
  ]

    \node[box] (canvas) {Canvas\\(sprites, mapa, animações)};
    \node[box, right=3.2cm of canvas] (html) {HTML semântico\\(texto, botões, descrições)};

    \node[box, below=1.6cm of $(canvas)!0.5!(html)$, minimum width=9.8cm] (ui)
      {Interface final no navegador\\(camada visual + camada informativa)};

    \draw[->] (canvas) -- (ui);
    \draw[->] (html) -- (ui);

  \end{tikzpicture}
  \caption{Separação entre a camada visual (canvas) e a camada informativa 
  (HTML semântico), permitindo acessibilidade e melhor suporte a tecnologias 
  de apoio.}
  \label{fig:canvas-html-semantico}
\end{figure}

\subsubsection{Independência de plataforma e performance}

Um objetivo importante do projeto é garantir que o jogo possa ser utilizado em 
diferentes plataformas e em dispositivos com capacidades variadas. Em contexto 
educativo, é comum existirem restrições de hardware e de rede, pelo que uma 
solução multiplataforma reduz barreiras de acesso e facilita adoção em sala de 
aula ou em uso autónomo.

Atualmente, o jogo é disponibilizado no navegador, permitindo acesso imediato 
sem instalação. No entanto, a base de código foi estruturada de forma a manter 
a lógica do jogo separada de detalhes específicos da plataforma, tornando mais 
simples uma futura adaptação para execução nativa noutros sistemas. Esta opção 
preserva o investimento de desenvolvimento e facilita a expansão do projeto.

Do ponto de vista de performance, a execução em browser exige cuidados 
particulares, como reduzir o peso de assets, evitar carregamentos desnecessários 
e manter um \textit{loop} de atualização/renderização eficiente. 
Em geral, a performance depende sobretudo de:
\begin{itemize}
  \item gestão de recursos gráficos (tamanho e número de sprites/tiles);
  \item otimização do ciclo de jogo (\textit{update}/\textit{draw});
  \item minimizar operações custosas durante a interação.
\end{itemize}
Estas medidas ajudam a garantir uma experiência fluida e consistente, 
mesmo em dispositivos mais modestos.

\subsection{Planeamento e organização do trabalho}
Numa fase inicial, o planeamento do projeto foi realizado em conjunto, 
com foco na definição do mapa, do fluxo do jogo e das principais 
funcionalidades. A partir desse planeamento, as tarefas foram divididas 
por áreas, de forma a permitir desenvolvimento em paralelo e reduzir 
dependências.

A distribuição principal de responsabilidades foi a seguinte:
\begin{itemize}
  \item Torres: lógica principal do jogo e integração dos sistemas.
  \item Danilo: construção do mapa e elementos associados ao cenário 
  (assets, organização do nível e interação com o ambiente).
  \item Guilherme: sistema de navegação e \textit{pathfinding}, bem como 
  suporte ao design e implementação do questionário.
\end{itemize}

Esta divisão permitiu manter uma estrutura de trabalho clara, onde cada 
membro tinha um foco definido, mantendo coordenação através do planeamento 
conjunto e da integração progressiva das funcionalidades.

\section{Tech Stack}

Esta secção descreve as principais tecnologias utilizadas no desenvolvimento do 
\textit{Casa dos Minerais}. A escolha da stack procurou equilibrar simplicidade, 
performance e facilidade de manutenção, garantindo uma base sólida para execução 
no navegador e expansão futura do projeto.

\subsection{Linguagem (Odin)}

O \textit{Casa dos Minerais} foi feito em Odin, uma linguagem compilada 
com foco em simplicidade, desempenho e controlo direto sobre recursos. 
A escolha de Odin permitiu implementar a lógica do jogo numa base leve, 
sem dependências excessivas, mantendo ao mesmo tempo um modelo de programação 
próximo de linguagens de baixo nível, adequado para aplicações interativas.

Outro fator relevante foi a boa integração de Odin com bibliotecas C, o que 
facilitou a utilização da raylib para gráficos e multimédia. Esta combinação 
simplifica a organização do projeto e torna mais fácil manter o código e 
adaptá-lo a diferentes plataformas no futuro, sem reescrever a lógica central.

\subsection{Biblioteca gráfica/multimédia (raylib)}

Para a execução nativa foi utilizada a raylib, integrada através do módulo 
\texttt{vendor:raylib}. Esta biblioteca fornece a base do ciclo de aplicação 
em desktop, incluindo criação de janela, controlo de \textit{frame rate}, 
câmara 2D, leitura de input do rato e desenho dos elementos visuais.

No código nativo (\texttt{native/main.odin}), a raylib é usada para inicializar 
e executar o \textit{loop} principal e para dar suporte à navegação no mapa. 
Exemplos de chamadas relevantes incluem \texttt{InitWindow} e 
\texttt{SetTargetFPS} (configuração), \texttt{BeginMode2D} e 
\texttt{GetScreenToWorld2D} (câmara e conversão de coordenadas), e funções de 
desenho como \texttt{DrawRectangle} e \texttt{DrawCircleV}. Esta abordagem 
permitiu validar rapidamente a lógica do jogo e o comportamento de interação 
num ambiente local simples de executar.

No estado atual do projeto, a raylib é usada sobretudo como base gráfica e de 
input no alvo nativo. Na versão web, a camada de áudio é gerida pelo JavaScript através da Web Audio API, 
o que permite adaptar a gestão de som às restrições e APIs do navegador.

\subsection{Build web / WebAssembly (WASM)}

Para disponibilizar o jogo no navegador, a lógica principal é compilada em Odin 
para o alvo \texttt{js\_wasm32}, gerando o módulo \texttt{index.wasm}. Este 
processo é automatizado através de \texttt{build.sh} e \texttt{build.bat}, que 
também copiam o \texttt{odin.js} (runtime de Odin) para a pasta \texttt{web/}.

De forma resumida, o fluxo de build web é:
\begin{enumerate}
  \item copiar \texttt{core/sys/wasm/js/odin.js} para \texttt{web/odin.js};
  \item compilar o projeto com \texttt{odin build . -target:js\_wasm32};
  \item gerar a saída em \texttt{web/index.wasm}.
\end{enumerate}

No arranque da aplicação web, o \texttt{odin.js} é carregado em 
\texttt{web/index.html} e o WASM é inicializado em \texttt{web/index.js} 
através de \texttt{odin.runWasm("index.wasm", ...)}. A partir desse ponto, 
o JavaScript gere a camada de interface e renderização em \textit{canvas}, 
enquanto a lógica do jogo permanece no módulo compilado em WASM.

Como o navegador impõe restrições de acesso a ficheiros locais para módulos 
WASM, a execução é feita através de um servidor HTTP estático na pasta 
\texttt{web/}, conforme descrito no \texttt{README.md}.

\subsection{Scripts/ferramentas de build e colaboração (Git, etc.)}

O desenvolvimento foi suportado por um conjunto de ferramentas e scripts para 
facilitar colaboração e tornar o processo de build reprodutível. Para controlo 
de versões foi utilizado Git, com alojamento no GitHub, permitindo trabalho em 
paralelo e histórico completo de alterações através de \textit{commits}. Esta 
abordagem simplificou a integração do trabalho do grupo e reduziu conflitos 
durante a implementação.

Para automatizar tarefas repetitivas, o repositório inclui scripts de build, 
nomeadamente \texttt{build.sh} e \texttt{build.bat}. Estes scripts tratam da 
compilação para WebAssembly e da preparação da pasta \texttt{web/}, incluindo 
a cópia do runtime \texttt{odin.js} e a geração do ficheiro \texttt{index.wasm}. 
Desta forma, o processo de compilação torna-se consistente entre sistemas 
operativos e reduz erros associados a passos manuais.

Adicionalmente, a execução local da versão web é feita através de um servidor 
HTTP estático (conforme descrito no \texttt{README.md}), contornando as 
restrições do navegador relativas ao carregamento de módulos WASM a partir do 
sistema de ficheiros. Esta organização permitiu testar rapidamente alterações 
e manter um fluxo de desenvolvimento estável ao longo do projeto.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{figuras/fluxo_build_execucao.png}
  \caption{Fluxo simplificado de build e execução da versão web do jogo, 
  desde o código-fonte e scripts de compilação até ao carregamento do WASM 
  no navegador.}
  \label{fig:fluxo-build-execucao}
\end{figure}



%%%

% \begin{figure}[!htb]
%   \centering
%   \caption{Exemplo de Figura flutuante (\textit{in}
%   \url{http://en.wikipedia.org/wiki/Class_diagram})}
%   \includegraphics[width=13cm]{exemploFig}
%   \label{fig:exemplofig}
% \end{figure}
%
% \begin{center}
%
%   \captionof{figure}{Exemplo de Figura não flutuante (\textit{in}
%   \url{http://en.wikipedia.org/wiki/Class_diagram})}
%   \includegraphics[width=\textwidth]{exemploFig}
%   %\includegraphics[width=0.5\textwidth]{exemploFig}
%   \label{fig:exemplofigFixa}
% \end{center}

% \lstinputlisting[language=java,abovecaptionskip=20pt,caption={Exemplo
%     de listagem de parte de um ficheiro Java na pasta
% listagens.},{label=lst:javaparcial},firstline=38,lastline=44]{listagens/quicksort.java}

% \noindent
% \begin{minipage}{\linewidth}
%   \captionof{table}{Uma tabela de exemplo não flutuante} % título da tabela
%   \begin{tabular}{l l c r} % duas colunas à esquerda (l l), uma ao
%     % centro (c) e uma à direita (r) (4 colunas)
%     \hline\hline %insere duas linhas horizontais
%     Caso & Método 1 & Método 2 & Método 3 \\ [0.5ex] % insere tabela
%     \hline % insere uma linha horizontal
%     1 & 50 & 837 & 970 \\ % insure corpo da tabela
%     2 & 47 & 877 & 230 \\
%     3 & 31 & 25 & 415 \\
%     4 & 35 & 144 & 2356 \\
%     5 & 45 & 300 & 556 \\ [1ex] % [1ex] adiciona espaço vertical
%     \hline %insere uma linha horizontal
%   \end{tabular}
%   \label{tab:casoFIXO} % é utilizada para referir a tabela no texto
%   \\ %% linha em braco
%   \textit{Nota}: uma nota. remover se não for necessária.\\
% \end{minipage}
%
% %baseado num exemplo em http://www1.maths.leeds.ac.uk/latex/TableHelp1.pdf
% \begin{table}[!htb]
%   \caption{Uma tabela de exemplo}
%   \begin{tabular}{l l c r} % duas colunas à esquerda (l l), uma ao
%     % centro (c) e uma à direita (r) (4 colunas)
%     \hline\hline %insere duas linhas horizontais
%     Caso & Método 1 & Método 2 & Método 3 \\ [0.5ex] % insere tabela
%     \hline % insere uma linha horizontal
%     1 & 50 & 837 & 970 \\ % insere corpo da tabela
%     2 & 47 & 877 & 230 \\
%     3 & 31 & 25 & 415 \\
%     4 & 35 & 144 & 2356 \\
%     5 & 45 & 300 & 556 \\ [1ex] % [1ex] adiciona espaço vertical
%     \hline %insere uma linha horizontal
%   \end{tabular}
%   \label{tab:caso} % é utilizada para referir a tabela no texto
%   \\ %% linha em braco
%   \textit{Nota}: uma nota. remover se não for necessária.\\
% \end{table}
